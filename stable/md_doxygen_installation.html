<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>HALA: Handy Accelerated Linear Algebra v1.0: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hala.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
    <div class="doxygen">
            <a href="http://www.doxygen.org/index.html">
                <img class="footer" src="doxygen.png" alt="doxygen"/>
                </a> 1.8.13
    </div>
   <div id="projectname">HALA: Handy Accelerated Linear Algebra v1.0
   <!--         <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
 -->
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doxygen_installation.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><table class="doxtable">
<tr>
<th>Feature </th><th>Tested versions  </th></tr>
<tr>
<td>gcc </td><td>5 - 10 </td></tr>
<tr>
<td>clang </td><td>4 - 10 </td></tr>
<tr>
<td>cmake </td><td>3.10 - 3.16 </td></tr>
<tr>
<td>OpenBlas</td><td>0.2.20 - 0.3.8 </td></tr>
<tr>
<td>CUDA </td><td>10.0 - 11.1 </td></tr>
<tr>
<td>ROCM </td><td>3.8 </td></tr>
</table>
<p>HALA supports three modes of installation and usage:</p><ul>
<li>CMake install that exports the dependencies and configures the headers</li>
<li>CMake add sub-directory command to include HALA in an existing project</li>
<li>using individual modules and including the headers CMake is available from <a href="https://cmake.org/">https://cmake.org/</a> and also included in the native package repositories of most Linux distributions (e.g., Ubuntu 18.04) as well as Mac OSX Homebrew. The advantage of CMake is that it can automatically detect the needed libraries, handle the header configurations and compiler flags. Using the individual modules does not require CMake, but the user has to manually link to the necessary libraries.</li>
</ul>
<h3>Requirements</h3>
<p>HALA requires a C++-14 capable compiler and an implementation of BLAS and LAPACK (tested with OpenBLAS). HALA also supports GPU backends with Nvidia CUDA and AMD ROCM frameworks. See the Table at the top of the page and note that even if a feature has not been tested, it may still work (e.g., icc compiler with the MKL library).</p>
<h3>CMake HALA Install</h3>
<p>Using the CMake build engine: </p><div class="fragment"><div class="line">mkdir hala_build</div><div class="line">cd hala_build</div><div class="line">cmake -D CMAKE_INSTALL_PREFIX=&lt;install-path&gt; &lt;hala-options&gt; &lt;path-to-hala&gt;</div><div class="line">make</div><div class="line">make test</div><div class="line">make install</div><div class="line">make test_install</div></div><!-- fragment --><ul>
<li>note that <code>make test</code> works only with option <code>-D HALA_ENABLE_TESTING=ON</code></li>
</ul>
<p>Supported HALA options: </p><div class="fragment"><div class="line">-D HALA_INSTALL_SUB_PATH    (installs the headers in CMAKE_INSTALL_PREFIX/HALA_INSTALL_SUB_PATH)</div><div class="line">-D BLAS_LIBRARIES           (list with libraries, will skip the automated search)</div><div class="line">-D LAPACK_LIBRARIES         (list with libraries, will skip the automated search)</div><div class="line">-D HALA_GPU_BACKEND         (NONE/CUDA/ROCM - select the GPU backend)</div><div class="line">-D CUDA_TOOLKIT_ROOT_DIR    (when using CUDA, point to the CUDA installation)</div><div class="line">-D ROCM_ROOT                (when using ROCM, point to the ROCM installation)</div><div class="line">-D HALA_EXTENDED_REGISTERS  (NONE/SSE/AVX/AVX512 - select extended registers for the VEX module)</div><div class="line">-D HALA_ENABLE_CHOLMOD      (ON/OFF - search for Cholmod and enable the Cholmod solvers)</div><div class="line">-D HALA_CHOLMOD_ROOT        (when using CHOLMOD, point to the Cholmod installation)</div><div class="line">-D HALA_ENABLE_DOXYGEN      (ON/OFF - search for Doxygen and build the HALA documentation)</div><div class="line">-D DOXYGEN_EXECUTABLE       (when using Doxygen, select the Doxygen executable)</div><div class="line">-D HALA_ENABLE_TESTING      (ON/OFF - compile the HALA tests, if OFF there is nothing to compile)</div></div><!-- fragment --><ul>
<li>the BLAS and LAPACK libraries can be manually specified with <code>-D BLAS_LIBRARIES</code> and <code>-D LAPACK_LIBRARIES</code> circumventing the CMake search</li>
<li>the automatic search for Cholmod may fail to pick out all the dependencies (e.g., because libmetis.so.x has the wrong .x version), a CMake list of libraries can be provided by the project with <code>-D HALA_CHOLMOD_LIBRARIES</code> which will overwrite the automatic search</li>
<li>the <code>HALA_EXTENDED_REGISTERS</code> options will add flags to the HALA exported interface so that these flags can be propagated to a dependent target</li>
<li>additional flags can be specified with <code>-D HALA_CXX_FLAGS</code>, for example <code>-mtune=native</code> and <code>-mfma</code></li>
<li>if a vectorization option is skipped on install time, it can still be enabled by adding the flags later, e.g., building without avx but adding <code>-mavx</code> later<ul>
<li>adding more flags later may alter the defaults</li>
<li>the extra flags will not have been tested during install</li>
<li>the default alignment will fallback to <code>unaligned</code> since it has not been tested</li>
</ul>
</li>
</ul>
<p>Example CMake command for full install with the CUDA backend: </p><div class="fragment"><div class="line">cmake -D CMAKE_INSTALL_PREFIX=/home/&lt;user&gt;/.local/ \</div><div class="line">      -D HALA_INSTALL_SUB_PATH=include \</div><div class="line">      -D CMAKE_BUILD_TYPE=Release \</div><div class="line">      -D BLAS_LIBRARIES=/usr/x86_64-linux-gnu/libopenblas.so \</div><div class="line">      -D LAPACK_LIBRARIES=/usr/x86_64-linux-gnu/libopenblas.so \</div><div class="line">      -D HALA_GPU_BACKEND=CUDA \</div><div class="line">      -D CUDA_TOOLKIT_ROOT_DIR=/usr/loca/cuda-9.2 \</div><div class="line">      -D HALA_ENABLE_CHOLMOD=ON \</div><div class="line">      -D HALA_CHOLMOD_ROOT=/home/&lt;user&gt;/.local/ \</div><div class="line">      -D HALA_EXTENDED_REGISTERS=AXV \</div><div class="line">      -D HALA_CXX_FLAGS=&quot;-mfma;-mtune=native&quot; \</div><div class="line">      -D HALA_ENABLE_TESTING=ON \</div><div class="line">      -D HALA_ENABLE_DOXYGEN=ON \</div><div class="line">      &lt;path-to-hala&gt;</div></div><!-- fragment --><p>After the install, CMake projects can use the <code>find_package()</code> command to locate HALA: </p><div class="fragment"><div class="line">find_package(HALA 1.0 PATHS &lt;hala-install-path&gt;)</div><div class="line">target_link_libraries(FooMain HALA::HALA)</div></div><!-- fragment --><p> The PATHS can be ignored if the install is in a system default place, e.g., <code>/home/&lt;user&gt;/.local</code>, or if the environment variable <code>HALA_ROOT</code> is set.</p>
<p>Packages that do not use CMake have to manually add the include folder and the link libraries. The include folder is: </p><div class="fragment"><div class="line">CMAKE_INSTALL_PREFIX/HALA_INSTALL_SUB_PATH</div></div><!-- fragment --><p> The list of libraries required by HALA can be obtained with the command: </p><div class="fragment"><div class="line">cat &lt;hala-install-path&gt;/lib/HALA/HALA.cmake | grep INTERFACE_LINK_LIBRARIES</div></div><!-- fragment --><h3>Directly Include HALA in a CMake Project</h3>
<p>HALA can be incorporated in another CMake project directly with the <code>add_subdirectory()</code> command and without the need to go through an install: </p><div class="fragment"><div class="line">project(Foo VERSION x.y.z LANGUAGES CXX)</div><div class="line">add_executable(FooMain foo_main.cpp)</div><div class="line"></div><div class="line">set(HALA_GPU_BACKEND        ROCM CACHE INTERNAL)</div><div class="line">set(HALA_EXTENDED_REGISTERS AVX  CACHE INTERNAL)</div><div class="line"></div><div class="line">add_subdirectory(&lt;path-to-hala&gt; hala)</div><div class="line">target_link_libraries(FooMain HALA)</div></div><!-- fragment --><ul>
<li>HALA will automatically install the headers in the <code>HALA_INSTALL_SUB_PATH</code> sub-folder of the install prefix for Foo (default is <code>include</code>).</li>
<li>HALA will <b>not</b> install or export the <code>HALA</code> target, Foo must manually install/export the target to keep access to the dependencies. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<!-- <div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
<!--  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div> -->
</body>
</html>
